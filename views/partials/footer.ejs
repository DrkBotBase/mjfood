 <footer class="bg-slate-900/50 text-center py-8 mt-16 p-6">
    <p>Â¿Eres propietario? 
      <a href="https://wa.me/573046793853?text=Hola,%0Ame%20podrÃ­an%20dar%20informaciÃ³n%20de%20como%20aÃ±adir%20mi%20restaurante%20a%20la%20plataforma.%0AGracias." 
        class="text-emerald-400 hover:underline"
        target="_blank" 
        rel="noopener noreferrer">
        ContÃ¡ctanos para aÃ±adir tu restaurante
      </a>
    </p>
    ðŸ“± WhatsApp
  </footer>
  <script src="/js/pwa-handler.js"></script>
  <script>
    function showUpdateBanner(newWorker) {
        if (document.getElementById('pwa-update-banner')) {
            return;
        }
        
        const banner = document.createElement('div');
        banner.id = 'pwa-update-banner';
    
        const message = document.createElement('p');
        message.textContent = 'Â¡Nueva versiÃ³n disponible!';
    
        const updateButton = document.createElement('button');
        updateButton.id = 'pwa-update-button';
        updateButton.textContent = 'Actualizar';
        updateButton.addEventListener('click', () => {
            newWorker.postMessage({ action: 'skipWaiting' });
            banner.remove();
        });
        
        const closeButton = document.createElement('button');
        closeButton.id = 'pwa-close-button';
        closeButton.textContent = 'Ahora no';
        closeButton.addEventListener('click', () => {
            banner.remove();
        });
        
        banner.appendChild(message);
        banner.appendChild(updateButton);
        banner.appendChild(closeButton);
        document.body.appendChild(banner);
        
        styleUpdateBanner();
    }
    function styleUpdateBanner() {
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInUp {
                from {
                    transform: translate(-50%, 100%);
                    opacity: 0;
                }
                to {
                    transform: translate(-50%, 0);
                    opacity: 1;
                }
            }
    
            #pwa-update-banner {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background-color: #2d3748; /* Un gris oscuro */
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                z-index: 2000;
                display: flex;
                align-items: center;
                gap: 15px;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
                animation: slideInUp 0.5s ease-out forwards;
            }
    
            #pwa-update-banner p {
                margin: 0;
                font-size: 15px;
            }
    
            #pwa-update-banner button {
                border: none;
                border-radius: 5px;
                padding: 8px 12px;
                cursor: pointer;
                font-weight: bold;
                transition: background-color 0.2s;
            }
    
            #pwa-update-button {
                background-color: #38a169; /* Verde */
                color: white;
            }
            #pwa-update-button:hover {
                background-color: #2f855a;
            }
            
            #pwa-close-button {
                background-color: transparent;
                color: #a0aec0; /* Gris claro */
            }
            #pwa-close-button:hover {
                color: #e2e8f0;
            }
            
            @media (max-width: 600px) {
                #pwa-update-banner {
                    bottom: 0;
                    left: 0;
                    right: 0;
                    border-radius: 0;
                    justify-content: space-between;
                    padding: 15px;
                    transform: translateX(0);
                }
            }
        `;
        document.head.appendChild(style);
    }
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        <% if (typeof restaurantes !== 'undefined') { %>
          navigator.serviceWorker.register('/<%= restaurantes.id %>/sw.js')
        <% } else { %>
          navigator.serviceWorker.register('/sw.js')
        <% } %>
          .then((registration) => {
            console.log('SW registered: ', registration);
            
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              console.log('Nueva versiÃ³n del Service Worker encontrada');
              
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed') {
                  if (navigator.serviceWorker.controller) {
                    console.log('Nuevo contenido disponible; por favor actualice.');
                    showUpdateBanner(newWorker);
                  }
                }
              });
            });
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
      
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        console.log('Controller changed, reloading page...');
        window.location.reload();
      });
    }
  </script>